<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.0//EN">
<!--Converted with LaTeX2HTML 96.1-f (May 31, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Customizing the :htext verb</TITLE>
<META NAME="description" CONTENT="Customizing the :htext verb">
<META NAME="keywords" CONTENT="tm2">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="tm2.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html2" HREF="http://tecfa.unige.ch//moo/book2/tm2.html"> <IMG  ALIGN=BOTTOM ALT="external" SRC="http://tecfa.unige.ch/ico/navi/tex2html/top.gif"  > </A> <A NAME="tex2html2007" HREF="node102.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="http://tecfa.unige.ch/gif/tex2html//next_motif.gif"></A> <A NAME="tex2html2005" HREF="node98.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="http://tecfa.unige.ch/gif/tex2html//up_motif.gif"></A> <A NAME="tex2html2001" HREF="node100.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="http://tecfa.unige.ch/gif/tex2html//previous_motif.gif"></A> <A NAME="tex2html2009" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="http://tecfa.unige.ch/gif/tex2html//contents_motif.gif"></A> <A NAME="tex2html2010" HREF="node167.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="http://tecfa.unige.ch/gif/tex2html//index_motif.gif"></A><BR>
<B> Next:</B> <A NAME="tex2html2008" HREF="node102.html">8.10 Permissions and Generic </A>
<B>Up:</B> <A NAME="tex2html2006" HREF="node98.html">8.9 [TECFAMOO] ``WOO'' Tutorial</A>
<B> Previous:</B> <A NAME="tex2html2002" HREF="node100.html">Adding webby verbs</A>
<BR> <P>
<H2><A NAME="SECTION04193000000000000000">Customizing the :htext verb</A></H2>
<P>
<A NAME="seccustomizinghtext">&#160;</A>
<P>
The verb that displays most of the object on the web is ``:htext''.
If you wish you can edit the verb to display information it normally
would not. This verb is not too complicated, but you have to watch
out what you do: It has to return some correct html ! Also to insure
that people won't get lost, it is a good idea to keep the standard
header of the html page.
<P>
The most important core objects have :htext verbs defined
(see section <A HREF="node144.html#sechtextverbs">14.3.2</A> for details).
So our holder verb inherits the :htext verb from $thing which
in turn inherits it from #1.
<P>
Please note that the verb below may change now and then ! Also remember
that we break up lines here to make them fit on a page (especially
the paper version of this manual)
<P>
<SMALL CLASS=SMALL><PRE>&gt;@l #1:htext
#1:&quot;htext&quot;   this none this
 1:  &quot;Returns the object:title as both the html title and as an &lt;h1&gt;
      header at the top of the web page.&quot;;
 2:  &quot;Followed by the objects description, and checks to see if text
      is preformatted.&quot;;
 3:  &quot;Generates a url for the object's location, adds in anything from
      the htext property, followed by any web_verbs, and ending with
      a standard footer.&quot;;
 4:  set_task_perms(caller_perms());
 5:  title = this:title();
 6:  desc = typeof(this.description) == LIST ? this.description |
     {this.description};
 7:  if (this.pre)
 8:    desc = {&quot;&lt;pre&gt;&quot;, @desc, &quot;&lt;/pre&gt;-----&lt;br&gt;&quot;};
 9:  endif
10:  loc = valid(this.location) ? tostr(&quot;&lt;h3&gt;Location:&lt;/h3&gt; &quot;,
     $www_utils:genref_obj(this.location)) | &quot;&quot;;
11:  htext = typeof(this.htext) == LIST ? this.htext | {this.htext};
12:  verbs = this:list_web_verbs();
13:  &quot;this.webhits = this.webhits + 1;&quot;;
14:  return {@$www_utils:do_html_header(title),
      tostr(&quot;&lt;h1 align=\"center\&quot;&gt;&quot;, title, &quot;&lt;/h1&gt;&quot;), &quot;&lt;p&gt;&quot;, 
      @desc, &quot;&lt;p&gt;&quot;, loc, &quot;&lt;p&gt;&quot;, @htext, &quot;&lt;p&gt;&quot;, @verbs, 
     @$www_utils:do_html_footer()};
15:  &quot;Last edited by Irradiate on Fri Aug 25 14:47:32 1995 MET DST&quot;;
--</PRE></SMALL>
<P>
You can copy this verb and tailor it for your needs if you wish.
Be sure to delete the following line.
<SMALL CLASS=SMALL><PRE>   4:  set_task_perms(caller_perms());</PRE></SMALL>
Since :htext verbs on core objects run under wizard permission 
execution permissions are changed at run-time. But only wizards
can do that.
<P>
Also, if you really plan to write your own :htext verb, consult the
<code>$www_utils</code> box, or at least try to understand what the 
<code>$www_utils</code> verbs used in the above :htext verb do.
<P>
<BR> <HR>
<P><ADDRESS>
<I>Daniel K. Schneider <BR>
Thu Apr 17 12:43:52 MET DST 1997</I>
</ADDRESS>
</BODY>
</HTML>
